# QuQuå®¢æˆ·ç«¯å¼€å‘è°ƒè¯•æŒ‡å—

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

QuQuå®¢æˆ·ç«¯æ˜¯Electronæ¡Œé¢åº”ç”¨ï¼Œéœ€è¦GUIç¯å¢ƒè¿›è¡Œå¼€å‘å’Œè°ƒè¯•ã€‚åç«¯å·²è¿ç§»åˆ°JetsonæœåŠ¡å™¨çš„GPUåŠ é€ŸæœåŠ¡ã€‚

## ğŸ¯ å¼€å‘æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| **æ–¹æ¡ˆ1: æœ¬åœ°å¼€å‘æœº** | å¼€å‘ä½“éªŒæœ€å¥½ã€å·¥å…·é“¾å®Œæ•´ã€æ€§èƒ½æµç•… | éœ€è¦é…ç½®è·¨è®¾å¤‡è¿æ¥ | â­â­â­â­â­ |
| **æ–¹æ¡ˆ2: Jetsonæœ¬åœ°GUI** | ç½‘ç»œå»¶è¿Ÿä½ã€ç›´æ¥è®¿é—® | éœ€è¦æ˜¾ç¤ºå™¨ã€å¼€å‘å·¥å…·å®‰è£…éº»çƒ¦ | â­â­â­ |
| **æ–¹æ¡ˆ3: è¿œç¨‹æ¡Œé¢** | çµæ´»ã€å¯è¿œç¨‹å¼€å‘ | ç½‘ç»œå»¶è¿Ÿã€æ€§èƒ½æŸå¤± | â­â­ |

## ğŸš€ æ¨èæ–¹æ¡ˆï¼šæœ¬åœ°å¼€å‘æœº + è¿œç¨‹åç«¯

è¿™æ˜¯æœ€ä½³çš„å¼€å‘ä½“éªŒæ–¹æ¡ˆã€‚

### æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ°å¼€å‘æœº (Windows/Mac/Linux)              â”‚
â”‚  192.168.100.X                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  QuQu Electron å®¢æˆ·ç«¯            â”‚      â”‚
â”‚  â”‚  (å¼€å‘æ¨¡å¼)                       â”‚      â”‚
â”‚  â”‚                                   â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚      â”‚
â”‚  â”‚  â”‚ React UI     â”‚                â”‚      â”‚
â”‚  â”‚  â”‚ (Vite Dev)   â”‚                â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚      â”‚
â”‚  â”‚         â”‚                         â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                â”‚      â”‚
â”‚  â”‚  â”‚ API Client   â”‚                â”‚      â”‚
â”‚  â”‚  â”‚ é…ç½®åç«¯åœ°å€  â”‚                â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚            â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTP APIè°ƒç”¨
             â”‚ (192.168.100.38:8000)
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Jetson AGX Orin Server                     â”‚
â”‚  192.168.100.38                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ququ-backend (Docker)           â”‚      â”‚
â”‚  â”‚                                   â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚      â”‚
â”‚  â”‚  â”‚ FastAPI     â”‚  â”‚ FunASR GPU â”‚â”‚      â”‚
â”‚  â”‚  â”‚ :8000       â”‚â”€â”€â”‚ + Ollama   â”‚â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤1: å‡†å¤‡æœ¬åœ°å¼€å‘ç¯å¢ƒ

#### Windowså¼€å‘ç¯å¢ƒ

```powershell
# 1. å®‰è£…Node.js (æ¨èv20 LTS)
# ä¸‹è½½: https://nodejs.org/

# 2. å®‰è£…pnpm
npm install -g pnpm

# 3. å…‹éš†QuQué¡¹ç›®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git clone https://github.com/yan5xu/ququ.git
cd ququ

# 4. å®‰è£…ä¾èµ–
pnpm install
```

#### macOSå¼€å‘ç¯å¢ƒ

```bash
# 1. å®‰è£…Homebrewï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 2. å®‰è£…Node.js
brew install node

# 3. å®‰è£…pnpm
npm install -g pnpm

# 4. å…‹éš†å¹¶å®‰è£…
git clone https://github.com/yan5xu/ququ.git
cd ququ
pnpm install
```

#### Linux (Ubuntu/Debian) å¼€å‘ç¯å¢ƒ

```bash
# 1. å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# 2. å®‰è£…pnpm
npm install -g pnpm

# 3. å…‹éš†å¹¶å®‰è£…
git clone https://github.com/yan5xu/ququ.git
cd ququ
pnpm install
```

### æ­¥éª¤2: ä¿®æ”¹QuQuå®¢æˆ·ç«¯è¿æ¥è¿œç¨‹åç«¯

QuQuåŸæœ¬ä½¿ç”¨å†…åµŒçš„Python FunASRæœåŠ¡ï¼Œç°åœ¨éœ€è¦ä¿®æ”¹ä¸ºè¿æ¥è¿œç¨‹APIã€‚

#### 2.1 åˆ›å»ºåç«¯APIé…ç½®æ–‡ä»¶

åˆ›å»º `src/config/backend.js`:

```javascript
// src/config/backend.js
/**
 * QuQuåç«¯APIé…ç½®
 * ç”¨äºè¿æ¥Jetson GPUåŠ é€Ÿåç«¯æœåŠ¡
 */

// å¼€å‘ç¯å¢ƒé…ç½®
const DEVELOPMENT_CONFIG = {
  // JetsonæœåŠ¡å™¨åœ°å€
  baseURL: 'http://192.168.100.38:8000',
  timeout: 30000, // 30ç§’è¶…æ—¶

  // APIç«¯ç‚¹
  endpoints: {
    health: '/api/health',
    status: '/api/status',
    transcribe: '/api/asr/transcribe',
    optimize: '/api/llm/optimize',
    transcribeAndOptimize: '/api/asr/transcribe-and-optimize'
  }
};

// ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆæ‰“åŒ…åä½¿ç”¨localhostæˆ–é…ç½®çš„åœ°å€ï¼‰
const PRODUCTION_CONFIG = {
  baseURL: process.env.BACKEND_URL || 'http://localhost:8000',
  timeout: 30000,
  endpoints: DEVELOPMENT_CONFIG.endpoints
};

// æ ¹æ®ç¯å¢ƒå¯¼å‡ºé…ç½®
const config = process.env.NODE_ENV === 'production'
  ? PRODUCTION_CONFIG
  : DEVELOPMENT_CONFIG;

export default config;

// è¾…åŠ©å‡½æ•°ï¼šè·å–å®Œæ•´URL
export function getEndpointURL(endpointName) {
  return config.baseURL + config.endpoints[endpointName];
}

// è¾…åŠ©å‡½æ•°ï¼šæ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
export async function checkBackendHealth() {
  try {
    const response = await fetch(getEndpointURL('health'), {
      method: 'GET',
      timeout: 5000
    });
    return response.ok;
  } catch (error) {
    console.error('Backend health check failed:', error);
    return false;
  }
}
```

#### 2.2 åˆ›å»ºAPIå®¢æˆ·ç«¯å°è£…

åˆ›å»º `src/services/backendAPI.js`:

```javascript
// src/services/backendAPI.js
/**
 * QuQuåç«¯APIå®¢æˆ·ç«¯
 * å°è£…ä¸GPUåŠ é€Ÿåç«¯çš„é€šä¿¡
 */

import axios from 'axios';
import backendConfig, { getEndpointURL } from '../config/backend.js';

// åˆ›å»ºaxioså®ä¾‹
const apiClient = axios.create({
  baseURL: backendConfig.baseURL,
  timeout: backendConfig.timeout,
  headers: {
    'Content-Type': 'application/json'
  }
});

// è¯·æ±‚æ‹¦æˆªå™¨
apiClient.interceptors.request.use(
  config => {
    console.log(`[API] ${config.method.toUpperCase()} ${config.url}`);
    return config;
  },
  error => {
    console.error('[API] Request error:', error);
    return Promise.reject(error);
  }
);

// å“åº”æ‹¦æˆªå™¨
apiClient.interceptors.response.use(
  response => {
    console.log(`[API] Response:`, response.status);
    return response;
  },
  error => {
    console.error('[API] Response error:', error.response?.status, error.message);
    return Promise.reject(error);
  }
);

/**
 * è¯­éŸ³è¯†åˆ«API
 * @param {Blob|File} audioBlob - éŸ³é¢‘æ•°æ®
 * @param {Object} options - è¯†åˆ«é€‰é¡¹
 * @returns {Promise<Object>} è¯†åˆ«ç»“æœ
 */
export async function transcribeAudio(audioBlob, options = {}) {
  const {
    useVad = true,
    usePunc = true,
    hotword = ''
  } = options;

  const formData = new FormData();
  formData.append('audio', audioBlob, 'audio.wav');
  formData.append('use_vad', useVad);
  formData.append('use_punc', usePunc);
  formData.append('hotword', hotword);

  try {
    const response = await apiClient.post(
      backendConfig.endpoints.transcribe,
      formData,
      {
        headers: {
          'Content-Type': 'multipart/form-data'
        }
      }
    );

    return response.data;
  } catch (error) {
    console.error('Transcription failed:', error);
    throw error;
  }
}

/**
 * æ–‡æœ¬ä¼˜åŒ–API
 * @param {string} text - å¾…ä¼˜åŒ–æ–‡æœ¬
 * @param {string} mode - ä¼˜åŒ–æ¨¡å¼ (optimize/format/punctuate/custom)
 * @param {string} customPrompt - è‡ªå®šä¹‰æç¤ºè¯ï¼ˆmodeä¸ºcustomæ—¶ä½¿ç”¨ï¼‰
 * @returns {Promise<Object>} ä¼˜åŒ–ç»“æœ
 */
export async function optimizeText(text, mode = 'optimize', customPrompt = null) {
  try {
    const response = await apiClient.post(
      backendConfig.endpoints.optimize,
      {
        text,
        mode,
        custom_prompt: customPrompt
      }
    );

    return response.data;
  } catch (error) {
    console.error('Text optimization failed:', error);
    throw error;
  }
}

/**
 * ä¸€ä½“åŒ–å¤„ç†APIï¼ˆè¯­éŸ³è¯†åˆ« + æ–‡æœ¬ä¼˜åŒ–ï¼‰
 * @param {Blob|File} audioBlob - éŸ³é¢‘æ•°æ®
 * @param {Object} options - å¤„ç†é€‰é¡¹
 * @returns {Promise<Object>} å¤„ç†ç»“æœ
 */
export async function transcribeAndOptimize(audioBlob, options = {}) {
  const {
    useVad = true,
    usePunc = true,
    hotword = '',
    optimizeMode = 'optimize'
  } = options;

  const formData = new FormData();
  formData.append('audio', audioBlob, 'audio.wav');
  formData.append('use_vad', useVad);
  formData.append('use_punc', usePunc);
  formData.append('hotword', hotword);
  formData.append('optimize_mode', optimizeMode);

  try {
    const response = await apiClient.post(
      backendConfig.endpoints.transcribeAndOptimize,
      formData,
      {
        headers: {
          'Content-Type': 'multipart/form-data'
        }
      }
    );

    return response.data;
  } catch (error) {
    console.error('Transcribe and optimize failed:', error);
    throw error;
  }
}

/**
 * è·å–åç«¯çŠ¶æ€
 * @returns {Promise<Object>} åç«¯çŠ¶æ€ä¿¡æ¯
 */
export async function getBackendStatus() {
  try {
    const response = await apiClient.get(backendConfig.endpoints.status);
    return response.data;
  } catch (error) {
    console.error('Failed to get backend status:', error);
    throw error;
  }
}

/**
 * å¥åº·æ£€æŸ¥
 * @returns {Promise<boolean>} åç«¯æ˜¯å¦å¥åº·
 */
export async function healthCheck() {
  try {
    const response = await apiClient.get(backendConfig.endpoints.health);
    return response.status === 200;
  } catch (error) {
    return false;
  }
}

export default {
  transcribeAudio,
  optimizeText,
  transcribeAndOptimize,
  getBackendStatus,
  healthCheck
};
```

#### 2.3 ä¿®æ”¹QuQuåŸæœ‰ä»£ç 

æ‰¾åˆ°QuQuä¸­è°ƒç”¨FunASRçš„åœ°æ–¹ï¼ˆå¯èƒ½åœ¨`main.js`æˆ–`src`ç›®å½•ä¸‹ï¼‰ï¼Œæ›¿æ¢ä¸ºè°ƒç”¨ä¸Šé¢çš„APIã€‚

**ç¤ºä¾‹ä¿®æ”¹ï¼ˆä¼ªä»£ç ï¼‰ï¼š**

```javascript
// åŸæ¥çš„ä»£ç ï¼ˆè°ƒç”¨æœ¬åœ°Pythonï¼‰
// const result = await callLocalFunASR(audioData);

// ä¿®æ”¹ä¸ºè°ƒç”¨è¿œç¨‹API
import { transcribeAudio } from './services/backendAPI.js';

// åœ¨å½•éŸ³ç»“æŸå
async function handleAudioRecorded(audioBlob) {
  try {
    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
    setLoading(true);

    // è°ƒç”¨è¿œç¨‹GPUåŠ é€Ÿåç«¯
    const result = await transcribeAudio(audioBlob, {
      useVad: true,
      usePunc: true,
      hotword: userHotwords
    });

    if (result.success) {
      // æ˜¾ç¤ºè¯†åˆ«ç»“æœ
      displayText(result.text);
    } else {
      showError('è¯†åˆ«å¤±è´¥: ' + result.error);
    }
  } catch (error) {
    showError('ç½‘ç»œé”™è¯¯: ' + error.message);
  } finally {
    setLoading(false);
  }
}
```

### æ­¥éª¤3: é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆåœ¨QuQué¡¹ç›®æ ¹ç›®å½•ï¼‰:

```bash
# QuQuå®¢æˆ·ç«¯ç¯å¢ƒé…ç½®

# åç«¯APIåœ°å€
BACKEND_URL=http://192.168.100.38:8000

# å¼€å‘æ¨¡å¼
NODE_ENV=development
DEBUG=true
LOG_LEVEL=debug

# å…¶ä»–é…ç½®ï¼ˆä¿ç•™åŸæœ‰é…ç½®ï¼‰
LANGUAGE=zh-CN
AUDIO_SAMPLE_RATE=16000
AUDIO_CHANNELS=1
AUDIO_FORMAT=wav
THEME=auto
GLOBAL_HOTKEY=CommandOrControl+Shift+Space
```

### æ­¥éª¤4: å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# åœ¨QuQué¡¹ç›®ç›®å½•
cd ququ

# å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
pnpm run dev

# æˆ–è€…ç›´æ¥è¿è¡ŒElectron
pnpm start
```

Electronçª—å£ä¼šè‡ªåŠ¨æ‰“å¼€ï¼Œæ­¤æ—¶QuQuå®¢æˆ·ç«¯ä¼šè¿æ¥åˆ°JetsonæœåŠ¡å™¨çš„GPUåŠ é€Ÿåç«¯ã€‚

### æ­¥éª¤5: å¼€å‘è°ƒè¯•

#### 5.1 Chrome DevToolsè°ƒè¯•

Electronåº”ç”¨å¯ä»¥ä½¿ç”¨Chrome DevToolsï¼š

```javascript
// åœ¨main.jsä¸­æ·»åŠ ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
if (process.env.NODE_ENV === 'development') {
  mainWindow.webContents.openDevTools();
}
```

å¿«æ·é”®ï¼š
- **Windows/Linux**: `Ctrl + Shift + I`
- **macOS**: `Cmd + Option + I`

#### 5.2 æŸ¥çœ‹ç½‘ç»œè¯·æ±‚

åœ¨DevToolsçš„Networkæ ‡ç­¾ä¸­å¯ä»¥çœ‹åˆ°æ‰€æœ‰APIè°ƒç”¨ï¼š
- è¯·æ±‚URL: `http://192.168.100.38:8000/api/asr/transcribe`
- è¯·æ±‚æ–¹æ³•: POST
- å“åº”æ—¶é—´
- å“åº”å†…å®¹

#### 5.3 åç«¯æ—¥å¿—ç›‘æ§

åœ¨å¦ä¸€ä¸ªç»ˆç«¯ç›‘æ§Jetsonåç«¯æ—¥å¿—ï¼š

```bash
# SSHè¿æ¥åˆ°Jetson
ssh agx@192.168.100.38

# å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
docker-compose logs -f ququ-backend
```

### æ­¥éª¤6: æµ‹è¯•å®Œæ•´æµç¨‹

#### æµ‹è¯•æ¸…å•

- [ ] åç«¯å¥åº·æ£€æŸ¥
- [ ] è¯­éŸ³å½•åˆ¶
- [ ] éŸ³é¢‘ä¸Šä¼ 
- [ ] è¯­éŸ³è¯†åˆ«è¿”å›
- [ ] æ–‡æœ¬ä¼˜åŒ–ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- [ ] ç»“æœæ˜¾ç¤º
- [ ] é”™è¯¯å¤„ç†

#### å¿«é€Ÿæµ‹è¯•è„šæœ¬

åˆ›å»º `test-backend-connection.js`:

```javascript
// test-backend-connection.js
/**
 * æµ‹è¯•QuQuå®¢æˆ·ç«¯ä¸åç«¯è¿æ¥
 */

const axios = require('axios');

const BACKEND_URL = 'http://192.168.100.38:8000';

async function testConnection() {
  console.log('ğŸ” æµ‹è¯•QuQuåç«¯è¿æ¥...\n');

  // 1. å¥åº·æ£€æŸ¥
  console.log('1ï¸âƒ£  æµ‹è¯•å¥åº·æ£€æŸ¥...');
  try {
    const health = await axios.get(`${BACKEND_URL}/api/health`);
    console.log('   âœ… å¥åº·æ£€æŸ¥é€šè¿‡:', health.data);
  } catch (error) {
    console.error('   âŒ å¥åº·æ£€æŸ¥å¤±è´¥:', error.message);
    return;
  }

  // 2. çŠ¶æ€æ£€æŸ¥
  console.log('\n2ï¸âƒ£  æµ‹è¯•çŠ¶æ€æŸ¥è¯¢...');
  try {
    const status = await axios.get(`${BACKEND_URL}/api/status`);
    console.log('   âœ… åç«¯çŠ¶æ€:');
    console.log('      FunASR:', status.data.funasr.initialized ? 'å·²åˆå§‹åŒ–' : 'æœªåˆå§‹åŒ–');
    console.log('      Ollama:', status.data.ollama.available ? 'å¯ç”¨' : 'ä¸å¯ç”¨');
    console.log('      GPU:', status.data.gpu_available ? 'å¯ç”¨' : 'ä¸å¯ç”¨');
  } catch (error) {
    console.error('   âŒ çŠ¶æ€æŸ¥è¯¢å¤±è´¥:', error.message);
    return;
  }

  // 3. æ–‡æœ¬ä¼˜åŒ–æµ‹è¯•
  console.log('\n3ï¸âƒ£  æµ‹è¯•æ–‡æœ¬ä¼˜åŒ–...');
  try {
    const optimize = await axios.post(`${BACKEND_URL}/api/llm/optimize`, {
      text: 'è¿™ä¸ªå—¯é‚£ä¸ªå°±æ˜¯è¯´æµ‹è¯•ä¸€ä¸‹',
      mode: 'optimize'
    });
    console.log('   âœ… æ–‡æœ¬ä¼˜åŒ–æˆåŠŸ:');
    console.log('      åŸæ–‡:', optimize.data.original_text);
    console.log('      ä¼˜åŒ–å:', optimize.data.optimized_text);
  } catch (error) {
    console.error('   âŒ æ–‡æœ¬ä¼˜åŒ–å¤±è´¥:', error.message);
  }

  console.log('\nâœ… æ‰€æœ‰æµ‹è¯•å®Œæˆï¼QuQuå®¢æˆ·ç«¯å¯ä»¥è¿æ¥åˆ°åç«¯ã€‚');
}

testConnection().catch(console.error);
```

è¿è¡Œæµ‹è¯•ï¼š

```bash
node test-backend-connection.js
```

## ğŸ”§ æ–¹æ¡ˆ2: Jetsonæœ¬åœ°GUIå¼€å‘

å¦‚æœæ‚¨æœ‰æ˜¾ç¤ºå™¨å¯ä»¥è¿æ¥Jetsonï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨Jetsonä¸Šå¼€å‘ã€‚

### æ­¥éª¤1: å®‰è£…æ¡Œé¢ç¯å¢ƒï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰

```bash
# å®‰è£…è½»é‡çº§æ¡Œé¢ç¯å¢ƒXFCE
sudo apt update
sudo apt install xfce4 xfce4-goodies

# æˆ–å®‰è£…å®Œæ•´çš„Ubuntu Desktop
sudo apt install ubuntu-desktop
```

### æ­¥éª¤2: è¿æ¥æ˜¾ç¤ºå™¨å¯åŠ¨GUI

```bash
# å¯åŠ¨æ¡Œé¢ç¯å¢ƒ
startx
```

### æ­¥éª¤3: åœ¨Jetsonä¸Šå®‰è£…å¼€å‘å·¥å…·

```bash
# å®‰è£…Node.jså’Œpnpmï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs
npm install -g pnpm

# å®‰è£…VS Codeï¼ˆå¯é€‰ï¼‰
sudo snap install code --classic
```

### æ­¥éª¤4: å…‹éš†å’Œå¼€å‘

```bash
cd /data/deepresearch/ququ
pnpm install
pnpm run dev
```

æ­¤æ—¶QuQuä¼šåœ¨æœ¬åœ°è¿è¡Œï¼Œåç«¯ä¹Ÿåœ¨localhost:8000ï¼Œå»¶è¿Ÿæœ€ä½ã€‚

## ğŸŒ æ–¹æ¡ˆ3: è¿œç¨‹æ¡Œé¢/VNC

é€‚åˆéœ€è¦è¿œç¨‹å¼€å‘çš„åœºæ™¯ã€‚

### æ­¥éª¤1: åœ¨Jetsonä¸Šå®‰è£…VNCæœåŠ¡å™¨

```bash
# å®‰è£…x11vnc
sudo apt update
sudo apt install x11vnc

# åˆ›å»ºVNCå¯†ç 
x11vnc -storepasswd

# å¯åŠ¨VNCæœåŠ¡å™¨
x11vnc -display :0 -auth /var/run/lightdm/root/:0 -forever -loop -noxdamage -repeat -rfbauth ~/.vnc/passwd -rfbport 5900 -shared
```

### æ­¥éª¤2: ä»æœ¬åœ°è¿æ¥

**Windows:**
- ä½¿ç”¨ RealVNC Viewer æˆ– TigerVNC
- è¿æ¥åˆ°: `192.168.100.38:5900`

**macOS:**
- å†…ç½®"å±å¹•å…±äº«"åº”ç”¨
- æˆ–ä½¿ç”¨ RealVNC Viewer

**Linux:**
```bash
# ä½¿ç”¨Remminaæˆ–VNCå®¢æˆ·ç«¯
sudo apt install remmina
```

### æ­¥éª¤3: åœ¨è¿œç¨‹æ¡Œé¢ä¸­å¼€å‘

è¿æ¥åå°±åƒåœ¨æœ¬åœ°ä¸€æ ·æ“ä½œJetsonçš„æ¡Œé¢ç¯å¢ƒã€‚

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“

| é¡¹ç›® | æ–¹æ¡ˆ1: æœ¬åœ°å¼€å‘ | æ–¹æ¡ˆ2: Jetson GUI | æ–¹æ¡ˆ3: è¿œç¨‹æ¡Œé¢ |
|------|----------------|------------------|----------------|
| å¼€å‘æµç•…åº¦ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| ç½‘ç»œå»¶è¿Ÿ | æœ‰ï¼ˆAPIè°ƒç”¨ï¼‰ | æ—  | æœ‰ï¼ˆè¿œç¨‹æ¡Œé¢ï¼‰ |
| é…ç½®å¤æ‚åº¦ | ä¸­ | é«˜ | ä¸­ |
| ç¡¬ä»¶éœ€æ±‚ | å¼€å‘æœº | æ˜¾ç¤ºå™¨+é”®é¼  | å¼€å‘æœº |
| è°ƒè¯•ä¾¿åˆ©æ€§ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. **æ¨èä½¿ç”¨æ–¹æ¡ˆ1**ï¼ˆæœ¬åœ°å¼€å‘æœº + è¿œç¨‹åç«¯ï¼‰
   - å¼€å‘ä½“éªŒæœ€å¥½
   - å·¥å…·é“¾å®Œæ•´
   - ä¾¿äºç‰ˆæœ¬æ§åˆ¶

2. **å¼€å‘æµç¨‹ï¼š**
   ```
   æœ¬åœ°ç¼–å†™ä»£ç  â†’ çƒ­é‡è½½æµ‹è¯• â†’ Gitæäº¤ â†’
   éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆå¦‚éœ€ï¼‰
   ```

3. **è°ƒè¯•æŠ€å·§ï¼š**
   - ä½¿ç”¨Chrome DevToolsæŸ¥çœ‹ç½‘ç»œè¯·æ±‚
   - ç›‘æ§åç«¯æ—¥å¿—äº†è§£APIå“åº”
   - ä½¿ç”¨Postman/curlæµ‹è¯•APIç‹¬ç«‹äºå®¢æˆ·ç«¯

4. **ä»£ç ç®¡ç†ï¼š**
   - ForkåŸQuQuä»“åº“
   - åˆ›å»ºfeatureåˆ†æ”¯è¿›è¡Œä¿®æ”¹
   - æäº¤PRå›é¦ˆç¤¾åŒº

## ğŸš¨ å¸¸è§é—®é¢˜

**Q: APIè°ƒç”¨è¶…æ—¶ï¼Ÿ**
```javascript
// å¢åŠ è¶…æ—¶æ—¶é—´
axios.create({
  timeout: 60000 // 60ç§’
});
```

**Q: CORSé”™è¯¯ï¼Ÿ**
åç«¯å·²é…ç½®å…è®¸è·¨åŸŸï¼Œå¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ï¼š
```yaml
# docker-compose.ymlä¸­ç¡®è®¤
environment:
  - CORS_ORIGINS=*  # æˆ–å…·ä½“çš„å®¢æˆ·ç«¯åœ°å€
```

**Q: éŸ³é¢‘æ ¼å¼ä¸æ”¯æŒï¼Ÿ**
ç¡®ä¿éŸ³é¢‘æ ¼å¼ä¸ºwavï¼Œé‡‡æ ·ç‡16000Hzï¼š
```javascript
// è½¬æ¢éŸ³é¢‘æ ¼å¼
const audioContext = new AudioContext({ sampleRate: 16000 });
```

**Q: ç½‘ç»œæ…¢æ€ä¹ˆåŠï¼Ÿ**
- ä½¿ç”¨å±€åŸŸç½‘æœ‰çº¿è¿æ¥
- å‹ç¼©éŸ³é¢‘æ•°æ®
- è€ƒè™‘æ‰¹å¤„ç†è¯·æ±‚

## ğŸ“š ç›¸å…³æ–‡æ¡£

- QuQuåŸé¡¹ç›®: https://github.com/yan5xu/ququ
- Electronæ–‡æ¡£: https://www.electronjs.org/docs
- åç«¯APIæ–‡æ¡£: http://192.168.100.38:8000/docs
- æœ¬é¡¹ç›®æ–‡æ¡£: [DEPLOYMENT_SUMMARY.md](./DEPLOYMENT_SUMMARY.md)

---

**ç¥æ‚¨å¼€å‘é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–åœ¨GitHubæIssueã€‚** ğŸ‰
